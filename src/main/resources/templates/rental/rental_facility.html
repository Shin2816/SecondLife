<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/sub_layout}">
<head>
<meta charset="UTF-8">
<title></title>
</head>
<body>
    <th:block layout:fragment="content">
        <link rel="stylesheet" href="/css/rental_facility.css">
        <link rel="stylesheet" href="/css/validate_error.css">
        <div id="rental-facility-container">
            <!-- 탭 영역 -->
            <ul id="facility-tab" class="nav nav-pills">
                <li class="nav-item">
                    <button id="facility-name" type="button" class="nav-link active" aria-current="page">시설명</button>
                    <!-- <a class="nav-link active" aria-current="page" href="#">Active</a> -->
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">시설 선택</a>
                    <ul class="dropdown-menu">
                        <li th:each="facility : ${facilityList}">
                            <div class="dropdown-item" th:onclick="selectFacility(this, [[${facility.facilityCode}]])">[[${facility.facilityName}]]</div>
                        </li>
                    </ul>
                </li>
            </ul>


            <!-- 풀캘린더 영역 -->
            <div class="row">
                <th:block sec:authorize="isAnonymous()">
                    <input type="hidden" id="memberId" value="null">
                </th:block>
                <th:block sec:authorize="isAuthenticated()">
                    <input type="hidden" id="memberId" th:value="${#authentication.name}">
                </th:block>

                <div class="col-6">
                    <div id='calendar'></div>
                </div>
                <div class="col-6">
                    <div id="rental-calendar-table">
                        <h2 id="rental-table-title"></h2>
                        <table id="rental-table" class="table table-bordered table-hover text-center align-middle">
                            <colgroup>
                                <col width="10%">
                                <col width="*">
                                <col width="18%">
                                <col width="22%">
                                <col width="15%">
                            </colgroup>
                            <thead>
                                <tr>
                                    <td>선택</td>
                                    <td>시간</td>
                                    <td>요금</td>
                                    <td>예약팀</td>
                                    <td>예약자</td>
                                </tr>
                            </thead>
                        <tbody id="input-tr">
                                <tr>
                                    <td colspan="5">대관 예약을 진행할 센터와 시설, 장소를 선택하세요.</td>
                                </tr>
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- 모달창 -->
            <div class="modal fade" id="signUpModal" tabindex="-1" aria-labelledby="signUpModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form id="signRentalForm" action="/rental/signUpRentalFacility" method="post">
                            <div class="modal-body">
                                <div class="row">
                                    <input type="hidden" name="facilityCode" value="" id="facility-code-tag">
                                    <input type="hidden" name="rentalCharge" value="" id="rental-charge-tag">
                                    <div class="offset-2 col-10 text-start mb-2">시설명 : <input type="text" id="facility-name-tag" class="input-n-box" name="facilityName" value=""> </div>
                                    <div class="offset-2 col-10 text-start mb-2">대관날짜 : <input type="text" id="rental-date-tag" class="input-n-box" name="rentalDate" value=""></div>
                                    <div class="offset-2 col-10 text-start mb-2">대관타임 <span id="rental-time-tag"></span></div>
                                    <div class="offset-2 col-10 text-start mb-2">대관요금 : <span id="total-rental-charge-tag"></span></div>
                                    <div class="offset-2 col-10 text-start mb-2">사용자 : <input type="text" id="user-name-tag" class="input-n-box" name="rentalUser" value=""></div>
                                    <div class="offset-2 col-10 text-start mb-2">
                                        단체명 : <input class="input-box" type="text" name="rentalTeam">
                                        <div id="team-error-div" class="error-div"></div>
                                    </div>
                                    <div class="offset-2 col-10 text-start mb-2">
                                        사용목적 : <input class="input-box" type="text" name="rentalPurpose">
                                        <div id="purpose-error-div" class="error-div"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                                <input id="sign-up-btn" type="button" class="btn btn-primary" value="신청하기" onclick="rentalSignUpValidate()">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
        <script src="/js/rental/rental_facility.js"></script>
    </th:block>
</body>
</html>